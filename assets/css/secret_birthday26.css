/* ============ VARIABLES CSS ========================= */
:root {
  /* Colores */
  --color-bg-dark: #000000;
  --color-bg-deep: #0d1b2a;
  --color-text: #ffffff;
  --color-glow-primary: rgba(255, 255, 255, 0.9);
  --color-glow-secondary: rgba(180, 200, 255, 0.8);
  --color-glow-tertiary: rgba(180, 200, 255, 0.7);
  /* Fondos de controles */
  --btn-bg: rgba(255, 255, 255, 0.2);
  --btn-bg-hover: rgba(255, 255, 255, 0.35);
  /* Tipografía */
  --font-primary: "Cormorant Garamond", serif;
  --font-size-text: 1.6rem;
  --font-size-epilogue: 1.4rem;
  --font-size-btn: 1.3rem;
  --line-height-text: 1.6;
  --letter-spacing-text: 0.5px;
  --letter-spacing-epilogue: 1px;
  /* Espaciado */
  --text-width: 70%;
  --text-max-width: 800px;
  /* Efectos */
  --blur-amount: 6px;
  --text-glow: 
    0 0 6px var(--color-glow-primary),
    0 0 12px var(--color-glow-secondary),
    0 0 24px var(--color-glow-tertiary);
  /* Transiciones */
  --transition-fast: 0.2s ease;
  --transition-normal: 0.6s ease;
  --transition-slow: 2s ease;
  /* Z-index */
  --z-canvas: 0;
  --z-content: 20;
  --z-controls: 50;
}

/* ============ RESET Y BASE ========================= */
*,
*::before,
*::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
html {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ============ LAYOUT PRINCIPAL ========================= */
body {
  /* Dimensiones */
  min-height: 100vh;
  width: 100%;
  /* Fondo nocturno con gradiente radial */
  background: radial-gradient(
    ellipse at bottom, 
    var(--color-bg-deep) 0%, 
    var(--color-bg-dark) 100%
  );
  /* Centrado */
  display: flex;
  justify-content: center;
  align-items: center;
  /* Tipografía */
  font-family: var(--font-primary);
  color: var(--color-text);
  /* Evitar scroll */
  overflow: hidden;
}

/* ============ CANVAS DE ESTRELLAS ========================= */
#star-canvas {
  position: fixed;
  inset: 0;
  z-index: var(--z-canvas);
}

/* ============ CONTENIDO PRINCIPAL ========================= */
#content {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: var(--z-content);
}

/* ============ TEXTO DINÁMICO ========================= */
#text {
  /* Posicionamiento */
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  /* Dimensiones */
  width: var(--text-width);
  max-width: var(--text-max-width);
  /* Tipografía */
  font-size: var(--font-size-text);
  line-height: var(--line-height-text);
  letter-spacing: var(--letter-spacing-text);
  text-align: center;
  /* Efectos */
  color: var(--color-text);
  text-shadow: var(--text-glow);
  /* Estado inicial (oculto) */
  opacity: 0;
  /* Transición */
  transition: opacity var(--transition-normal);
  /* Respeta saltos de línea del JS */
  white-space: pre-line;
}
/* Estados de visibilidad */
#text.fade-in {
  opacity: 1;
}
#text.fade-out {
  opacity: 0;
}

/* ============ EPÍLOGO ========================= */
#epilogue {
  /* Posicionamiento */
  position: absolute;
  bottom: 15%;
  left: 50%;
  transform: translateX(-50%);
  /* Tipografía */
  font-size: var(--font-size-epilogue);
  letter-spacing: var(--letter-spacing-epilogue);
  text-align: center;
  /* Efectos */
  color: var(--color-text);
  text-shadow: var(--text-glow);
  /* Estado inicial (oculto) */
  opacity: 0;
  /* Transición lenta */
  transition: opacity var(--transition-slow);
  /* Respeta saltos de línea */
  white-space: pre-line;
}

/* ============ CONTROL DE MÚSICA ========================= */
#music-btn {
  /* Posicionamiento */
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: var(--z-controls);
  /* Dimensiones */
  width: 48px;
  height: 48px;
  /* Estilo */
  border: none;
  border-radius: 50%;
  background: var(--btn-bg);
  backdrop-filter: blur(var(--blur-amount));
  /* Tipografía */
  color: var(--color-text);
  font-size: var(--font-size-btn);
  /* Interacción */
  cursor: pointer;
  transition: 
    background var(--transition-fast),
    transform var(--transition-fast);
  /* Accesibilidad */
  -webkit-user-select: none;
  user-select: none;
}
/* Estados interactivos - Solo en dispositivos con hover */
@media (hover: hover) and (pointer: fine) {
  #music-btn:hover {
    background: var(--btn-bg-hover);
    transform: scale(1.1);
  }
}
/* Estado de foco para navegación por teclado */
#music-btn:focus {
  outline: 3px solid var(--color-text);
  outline-offset: 4px;
}
/* Estado activo para dispositivos táctiles */
#music-btn:active {
  transform: scale(0.95);
}

/* ============ UTILIDADES ========================= */
/* Clases de animación reutilizables */
.fade-in {
  opacity: 1 !important;
}
.fade-out {
  opacity: 0 !important;
}

/* ============ ACCESIBILIDAD ========================= */
/* Reducir movimiento para usuarios sensibles */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ============ RESPONSIVE DESIGN ========================= */
/* Móviles pequeños (hasta 480px) */
@media (max-width: 480px) {
  :root {
    --font-size-text: 1.2rem;
    --font-size-epilogue: 1.1rem;
    --text-width: 90%;
  }
  #text {
    line-height: 1.7;
  }
  #epilogue {
    bottom: 10%;
  }
  #music-btn {
    width: 44px;
    height: 44px;
    bottom: 15px;
    right: 15px;
    font-size: 1.1rem;
  }
}
/* Móviles (481px - 768px) */
@media (min-width: 481px) and (max-width: 768px) {
  :root {
    --font-size-text: 1.4rem;
    --font-size-epilogue: 1.2rem;
    --text-width: 85%;
  }
}
/* Tablets y superiores (769px+) */
@media (min-width: 769px) {
  :root {
    --text-width: 70%;
  }
}
/* Pantallas muy grandes (1440px+) */
@media (min-width: 1440px) {
  :root {
    --font-size-text: 1.8rem;
    --font-size-epilogue: 1.6rem;
  }
}
/* Pantallas ultra anchas (landscape en móvil) */
@media (max-height: 600px) and (orientation: landscape) {
  :root {
    --font-size-text: 1.2rem;
    --font-size-epilogue: 1rem;
  }
  #text {
    top: 45%;
  }
  #epilogue {
    bottom: 5%;
  }
}